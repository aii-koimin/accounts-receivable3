# 🎯 真のゼロベース仕様書テンプレート Ver4.0

## 📋 **設計原理: ソースコード参照不要の純粋仕様書**

### ❌ **従来の問題（本末転倒）**
```
業務要件 → 仕様書（実装コード埋め込み） → システム構築
     ↑___________________|
         循環参照・本末転倒
```

### ✅ **正しい構造（ゼロベース）**
```
業務要件 → 純粋仕様書 → システム自動生成
                    ↓
                ソースコードは結果物
```

---

# 📄 **TEMPLATE 1: 業務要件定義書**

## 1.1 ビジネス課題・目的
**課題**: [具体的な業務課題を記述]
例: 売掛金管理業務において、未入金・過入金の差異対応に人手で2週間かかり、担当者の心理的負担が大きい

**目的**: [解決したい目標を記述]  
例: AI自律処理により70%自動化し、処理時間を2日以内に短縮、心理的負担を軽減

**成功指標**: [定量的な測定指標を記述]
例: 
- AI自律処理率70%達成
- 処理時間2週間→2日短縮  
- 担当者の心理的負担指標30%軽減

## 1.2 ステークホルダー・利用者
**主要利用者**: [誰が使うかを記述]
例: 経理担当者、管理者、顧客（間接的）

**利用シーン**: [いつ・どのように使うかを記述]
例: 月末処理時、未入金発生時、顧客対応時

## 1.3 業務フロー（現状 vs 理想）
**現状フロー**: [現在の業務手順を記述]
```
1. 手動で未入金確認（2-3時間）
2. 顧客へ個別メール作成・送信（1-2時間/件）
3. 返信待ち・フォローアップ（数日-数週間）
4. 手動記録・進捗管理（30分/件）
```

**理想フロー**: [目標とする業務手順を記述]
```
1. AI自動差異検知（5分）
2. AI自動メール生成・送信（自動）
3. 進捗可視化・自動エスカレーション（自動）
4. 人間は確認・承認のみ（5分/件）
```

---

# 📋 **TEMPLATE 2: 機能仕様書**

## 2.1 システム機能一覧
**機能1**: [機能名と概要]
例: 差異自動検知機能
- 説明: 請求データと入金データを照合し、差異を自動検知
- 入力: 請求データ、入金データ
- 出力: 差異一覧（未入金・過入金・一部入金・複数請求）
- 処理: AI分析による確信度計算、介入レベル判定

**機能2**: [機能名と概要]
例: 5ステップ進捗管理機能
- 説明: 差異解決までの進捗を5段階で可視化
- ステップ: 1.検知 → 2.メール送付 → 3.連絡取得 → 4.合意 → 5.解決
- 表示: 進捗バー、各ステップの完了率、推定完了時間

**機能3**: [機能名と概要]
例: AI自動メール生成・送信機能
- 説明: 顧客・差異内容に応じてメールを自動生成・送信
- 条件: 確信度70%以上、顧客リスクレベル中以下
- テンプレート: 未入金督促、過入金照会、入金確認
- 送信: SMTP設定による自動送信

## 2.2 AI自律処理ルール
**介入レベル判定**: [AI判定条件を記述]
```
- ai_autonomous: 確信度90%以上 + 低リスク顧客 + 金額5万円以下
- ai_assisted: 確信度70%以上 + 中リスク顧客 + 金額20万円以下  
- human_required: 上記以外すべて + 高リスク顧客 + 大金額
```

**自動処理フロー**: [AI処理の流れを記述]
```
1. 差異検知 → 確信度計算
2. 介入レベル判定 → 処理方法決定
3. ai_autonomous: 自動メール送信 → ステータス更新
4. ai_assisted: メール下書き作成 → 人間承認待ち
5. human_required: 人間対応必要 → 通知送信
```

## 2.3 業務ルール・制約条件
**業務ルール**: [必ず守るべきルールを記述]
例:
- 未入金30日経過で自動エスカレーション
- 高リスク顧客は必ず人間確認
- メール送信は営業時間内のみ（9:00-18:00）
- 大金額（100万円以上）は管理者承認必要

**データ保持ルール**: [データの管理方針を記述]
例:
- 差異データは解決後5年間保持
- メール送信ログは1年間保持
- 顧客情報は個人情報保護法準拠

---

# 📊 **TEMPLATE 3: データ仕様書**

## 3.1 主要エンティティ定義
**エンティティ1**: 顧客（Customer）
```
- 顧客ID: 一意識別子
- 顧客コード: 業務用コード（例: CUST001）
- 顧客名: 会社名/個人名
- メールアドレス: 連絡先
- 支払条件: 支払期限（日数）
- 信用限度額: 取引上限金額
- リスクレベル: LOW/MEDIUM/HIGH/CRITICAL
```

**エンティティ2**: 入金差異（PaymentDiscrepancy）
```
- 差異ID: 一意識別子
- 差異タイプ: unpaid/overpaid/partial/multiple_invoices
- 予定金額: 本来入金されるべき金額
- 実際金額: 実際に入金された金額  
- 差異金額: 予定金額 - 実際金額
- ステータス: detected/processing/email_sent/customer_contacted/resolved
- 優先度: low/medium/high/urgent
- 介入レベル: ai_autonomous/ai_assisted/human_required
```

**エンティティ3**: メールログ（EmailLog）
```
- ログID: 一意識別子
- 送信者: システム送信者情報
- 宛先: 顧客メールアドレス
- 件名: メール件名
- 本文: メール本文
- 送信状態: pending/sent/failed/delivered
- 送信日時: 送信実行日時
```

## 3.2 データ関係（リレーション）
**関係1**: 顧客 ↔ 入金差異
- 1人の顧客に対し複数の差異が発生可能（1:N）
- 差異は必ず1人の顧客に紐づく

**関係2**: 入金差異 ↔ メールログ  
- 1つの差異に対し複数のメール送信可能（1:N）
- メールは必ず1つの差異に紐づく

## 3.3 外部データ連携
**Excel取り込みデータ**: [取り込み対象データの形式]
```
必須フィールド:
- 分類: 差異タイプ（未入金/過入金/一部入金）
- 会社名: 顧客名
- 金額: 差異金額
- to: 顧客メールアドレス

オプションフィールド:
- 決済期日: 支払期限
- 未入金内訳: 詳細情報
- Key: 重複防止用キー
```

---

# 🎨 **TEMPLATE 4: UI/UX仕様書**

## 4.1 画面構成・ナビゲーション
**メイン画面**: タスク管理画面（/tasks）
- 目的: 入金差異の一覧表示・進捗管理・操作実行
- レイアウト: ヘッダー + メインコンテンツ + フッター
- ナビゲーション: サイドバー（ダッシュボード/タスク/顧客/設定）

**サブ画面**: 
- ダッシュボード（/dashboard）: 統計サマリー・チャート表示
- データ取り込み（/data-import）: Excel取り込み機能
- メール設定（/email-settings）: SMTP設定・テスト機能
- メールテンプレート（/email-templates）: テンプレート管理

## 4.2 UI要素・表示方式
**5ステップ進捗表示**: [心理的負担軽減のためのUI]
```
[1.検知] → [2.メール送付] → [3.連絡取得] → [4.合意] → [5.解決]
   20%        40%           60%         80%      100%

- 現在ステップをハイライト表示
- 完了ステップを緑色で表示
- 推定完了時間を表示
- 全体進捗率をプログレスバーで表示
```

**3つの表示モード**: [用途に応じた表示切り替え]
- 列表モード: カード形式、視覚的、概要把握向け
- ブロックモード: グリッド形式、詳細情報、分析向け  
- テーブルモード: 表形式、一覧性、編集向け

**統計サマリー**: [現状把握のための情報表示]
```
AI自律処理: XX件 | 人間対応: XX件 | 電話必要: XX件 | 緊急: XX件
平均解決時間: X.X日 | 自動化率: XX% | 顧客満足度: XX%
```

## 4.3 インタラクション・操作方式
**差異レコード操作**: [ユーザーができる操作]
- クリック: 詳細表示・編集モード
- ドラッグ&ドロップ: ステータス変更
- 右クリック: コンテキストメニュー（編集/削除/メール送信）
- 一括選択: 複数レコードの一括操作

**リアルタイム更新**: [データの自動反映]
- 新規差異検知時: 自動で画面更新・通知表示
- ステータス変更時: 進捗バー自動更新
- メール送信完了時: 送信状態自動反映

---

# ⚙️ **TEMPLATE 5: 技術制約仕様書**

## 5.1 技術スタック制約
**必須技術**: [使用必須の技術を記述]
- Frontend: React 18+ + TypeScript + Tailwind CSS
- Backend: Node.js 18+ + Express + TypeScript
- Database: SQLite（開発）/PostgreSQL（本番）+ Prisma ORM
- 認証: JWT トークンベース認証

**推奨技術**: [使用推奨の技術を記述]  
- 状態管理: React Query + Context API
- バリデーション: Yup + React Hook Form
- チャート: Chart.js
- リアルタイム: Socket.IO（オプション）

## 5.2 非機能要件
**パフォーマンス**: [性能に関する制約]
- 画面表示: 3秒以内
- API応答: 1秒以内
- Excel取り込み: 1000件/分
- 同時利用者: 50人まで

**セキュリティ**: [セキュリティ要件]
- HTTPS通信必須
- JWT認証トークンは7日間有効
- ファイルアップロードは10MB制限
- SQLインジェクション対策必須

**可用性**: [システム稼働要件]
- 稼働率: 99%以上
- バックアップ: 日次自動実行
- ログ保持: 1年間
- エラー監視: 自動アラート

## 5.3 運用制約
**環境制約**: [運用環境の制約]
- 開発環境: ローカル（SQLite + npm run dev）
- 本番環境: Docker + PostgreSQL + Nginx
- ブラウザサポート: Chrome/Firefox/Safari/Edge 最新2バージョン

**データ制約**: [データに関する制約]
- 顧客データ: 個人情報保護法準拠
- 差異データ: 5年間保持
- メールデータ: 1年間保持
- バックアップ: 日次・週次・月次

---

# 🎯 **このテンプレートの使用方法**

## ✅ **ゼロベース仕様書作成手順**

### Step 1: 業務理解
1. 現在の業務課題を具体的に把握
2. 理想の業務フローを設計  
3. 成功指標を定量的に設定

### Step 2: 機能設計
1. 必要な機能を業務フローから抽出
2. AI処理ルールを明確に定義
3. 業務制約・ルールを整理

### Step 3: データ設計
1. 業務で扱うデータを整理
2. エンティティ間の関係を定義
3. 外部データ連携を設計

### Step 4: UI設計
1. ユーザーの利用シーンを想定
2. 心理的負担軽減を考慮したUI設計
3. 効率的な操作方式を設計

### Step 5: 技術設計  
1. 技術制約を整理
2. 非機能要件を定義
3. 運用制約を確認

## 🚀 **期待される効果**

### ✅ **ソースコード参照不要**
- 業務要件から直接システム生成可能
- 実装詳細に依存しない仕様書
- 技術変更に強い仕様書

### ✅ **再利用性・拡張性**
- 同種業務システムに応用可能
- 業務変更に柔軟対応
- 段階的機能追加が容易

### ✅ **品質保証**
- 業務要件の漏れ・矛盾を事前発見
- ステークホルダー間の合意形成
- テスト仕様の自動生成

---

**💡 結論**: このテンプレートを使用することで、現在のような「実装コード埋め込み仕様書」ではなく、「純粋な業務要件から直接システム生成可能な真の仕様書」を作成できます。

**🎯 次回実行時**: このテンプレートに従って業務要件を整理し、ソースコード参照なしでシステム自動生成を実現してください。