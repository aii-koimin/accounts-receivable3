# å£²æ›é‡‘ç®¡ç†AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  Ver3.0 å®Œå…¨å®Ÿè£…ä»•æ§˜æ›¸

## ğŸ¯ Ver3.0 æ¦‚è¦

**ğŸš€ å®Ÿè£…å®Œæˆç‰ˆ**: å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã¨100%åŒæœŸã—ãŸå®Œå…¨å®Ÿè£…ä»•æ§˜æ›¸  
**ğŸ”¥ è¶…å¤§è¦æ¨¡å®Ÿè£…**: 63ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»20,557è¡Œã®å®Œå…¨å®Ÿè£…æ¸ˆã¿ã‚·ã‚¹ãƒ†ãƒ   
**âš¡ å®Œå…¨å‹•ä½œç‰ˆ**: localhostç’°å¢ƒã§å³åº§ã«ç¨¼åƒå¯èƒ½ãªæœ¬æ ¼ã‚·ã‚¹ãƒ†ãƒ   

**ç›®çš„**: åŒç­‰ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å†æ§‹ç¯‰ã®ãŸã‚ã®æœ€çµ‚æ±ºå®šç‰ˆä»•æ§˜æ›¸  
**ç‰¹å¾´**: ã“ã®ä»•æ§˜æ›¸ã®é€šã‚Šã«å®Ÿè£…ã™ã‚Œã°ã€100%åŒç­‰ã®ã‚·ã‚¹ãƒ†ãƒ ãŒæ§‹ç¯‰å¯èƒ½

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ è¦æ¨¡ãƒ»æŠ€è¡“æŒ‡æ¨™

### å®Ÿè£…è¦æ¨¡
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React 18.2 + TypeScript 5.3.3 + Vite 5.0 + Tailwind CSS 3.3.6
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Node.js 18+ + Express.js 4.18.2 + TypeScript 5.3.3
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Prisma ORM 5.8.1 + PostgreSQL/SQLite
- **ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 63ãƒ•ã‚¡ã‚¤ãƒ« (å®Ÿè£…ã‚³ãƒ¼ãƒ‰)
- **ç·è¡Œæ•°**: 20,557è¡Œ (node_modulesé™¤ã)
- **APIæ•°**: 37ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (å®Œå…¨å®Ÿè£…æ¸ˆã¿)

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…è¦æ¨¡
```
Route Files (3,078è¡Œ):
- email.ts: 749è¡Œ (ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†)
- discrepancies.ts: 654è¡Œ (å·®ç•°ç®¡ç†ãƒ»AIå‡¦ç†) 
- dataImport.ts: 560è¡Œ (Excelå–ã‚Šè¾¼ã¿ãƒ»åˆ†æ)
- realtime.ts: 315è¡Œ (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡)
- customers.ts: 278è¡Œ (é¡§å®¢ç®¡ç†)
- tasks.ts: 225è¡Œ (ã‚¿ã‚¹ã‚¯ç®¡ç†)
- auth.ts: 201è¡Œ (èªè¨¼ãƒ»JWT)
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…è¦æ¨¡
```
Component Files:
- ProgressDiscrepancyFlowBoard.tsx: 5ã‚¹ãƒ†ãƒƒãƒ—é€²æ—ç®¡ç†UI
- EmailTemplateManagement.tsx: ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
- EmailSettingsForm.tsx: SMTPè¨­å®šãƒ»æ¥ç¶šãƒ†ã‚¹ãƒˆ
- DataImportPage.tsx: Excelå·®ç•°ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿
- TasksPage.tsx: ãƒ¡ã‚¤ãƒ³ç®¡ç†ç”»é¢ãƒ»çµ±è¨ˆã‚µãƒãƒªãƒ¼
```

## ğŸ¯ Ver3.0ã®ä¸»è¦æ”¹å–„ãƒ»æ–°æ©Ÿèƒ½

### Ver2.1ã‹ã‚‰ã®å¤§å¹…é€²åŒ–
1. **ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½ã®å®Œå…¨å®Ÿè£…**
   - Gmail/Outlookå®Œå…¨å¯¾å¿œ (SMTP SSL/STARTTLS)
   - ãƒãƒ¼ãƒˆè‡ªå‹•è¨­å®š (587: STARTTLSã€465: SSL)
   - æ¥ç¶šãƒ†ã‚¹ãƒˆãƒ»å®Ÿãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½
   - CCãƒ»BCCãƒ»ç½²åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®Œå‚™

2. **AIè‡ªå¾‹å‡¦ç†ã®é«˜åº¦åŒ–**
   - 3æ®µéšä»‹å…¥ãƒ¬ãƒ™ãƒ« (ai_autonomous/ai_assisted/human_required)
   - ç¢ºä¿¡åº¦ãƒ™ãƒ¼ã‚¹åˆ¤å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
   - Excelå·®ç•°ãƒ‡ãƒ¼ã‚¿ç›´æ¥AIåˆ†æ
   - ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è‡ªå‹•è©•ä¾¡API

3. **Excelå–ã‚Šè¾¼ã¿æ©Ÿèƒ½ã®å®Œå…¨å®Ÿè£…**
   - é‡è¤‡é˜²æ­¢æ©Ÿèƒ½ (importKeyãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
   - 25ä»¶å®Ÿãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
   - è‡ªå‹•é¡§å®¢ä½œæˆ (AUTO_XXXXã‚³ãƒ¼ãƒ‰)
   - AIåˆ¤å®šãƒ»ãƒ¡ãƒ¼ãƒ«æº–å‚™è‡ªå‹•å®Ÿè¡Œ

4. **çµ±è¨ˆãƒ»ç›£è¦–æ©Ÿèƒ½ã®å¼·åŒ–**
   - 6æŒ‡æ¨™ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆ
   - ğŸ“Š ç·ä»¶æ•°ãƒ»ğŸ¤– AIè‡ªå¾‹ãƒ»ğŸ‘¤ äººé–“å¯¾å¿œãƒ»ğŸ“ é›»è©±å¿…è¦ãƒ»ğŸš¨ ç·Šæ€¥ãƒ»ğŸ’° ç·å·®ç•°é¡
   - å¿ƒç†çš„è² æ‹…è»½æ¸›UIè¨­è¨ˆ

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ Ver3.0

### æŠ€è¡“æ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Frontend (React)                 â”‚
â”‚  - 3è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ (åˆ—è¡¨ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«)           â”‚
â”‚  - 5ã‚¹ãƒ†ãƒƒãƒ—é€²æ—ãƒãƒ¼ (å¿ƒç†çš„è² æ‹…è»½æ¸›)              â”‚
â”‚  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆã‚µãƒãƒªãƒ¼                       â”‚
â”‚  - Excelå–ã‚Šè¾¼ã¿UIãƒ»ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend (Node.js/Express)          â”‚
â”‚  - 37 API Endpoints (å®Œå…¨å®Ÿè£…)                   â”‚
â”‚  - AIè‡ªå¾‹å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³ (3æ®µéšã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)       â”‚
â”‚  - SMTPçµ±åˆãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚·ã‚¹ãƒ†ãƒ                    â”‚
â”‚  - Excelè§£æãƒ»ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã‚¨ãƒ³ã‚¸ãƒ³                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Prisma ORM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Database (PostgreSQL/SQLite)         â”‚
â”‚  - å®Œå…¨æ­£è¦åŒ–ã‚¹ã‚­ãƒ¼ãƒ (15ãƒ†ãƒ¼ãƒ–ãƒ«)                â”‚
â”‚  - ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–            â”‚
â”‚  - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ (Prisma Schema)
```prisma
model PaymentDiscrepancy {
  id                String   @id @default(cuid())
  type              String   // unpaid, overpaid, partial, multiple_invoices
  status            String   // detected, ai_analyzing, ai_executing, etc.
  priority          String   // low, medium, high, critical
  discrepancyAmount Decimal
  expectedAmount    Decimal?
  actualAmount      Decimal?
  detectedAt        DateTime @default(now())
  duePrice          Decimal?
  daysPastDue       Int?
  interventionLevel String?  // ai_autonomous, ai_assisted, human_required
  importKey         String?  // Excelé‡è¤‡é˜²æ­¢
  aiAnalysis        String?  // AIåˆ†æçµæœJSON
  
  // Relations
  customer          Customer         @relation(fields: [customerId], references: [id])
  customerId        String
  invoice           Invoice?         @relation(fields: [invoiceId], references: [id])
  invoiceId         String?
  actions           DiscrepancyAction[]
  emailLogs         EmailLog[]
  
  @@map("payment_discrepancies")
}
```

## ğŸ¯ æ¥­å‹™ãƒ•ãƒ­ãƒ¼ Ver3.0 (å®Œå…¨å®Ÿè£…ç‰ˆ)

### Phase 1: ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ (Excel/æ‰‹å‹•)
```typescript
// 1. Excelå·®ç•°ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
POST /api/import/analyze
Content-Type: multipart/form-data
Response: { fileName, totalRows, validRows, preview }

// 2. æœ¬å–ã‚Šè¾¼ã¿å®Ÿè¡Œ
POST /api/import/discrepancies  
å‡¦ç†: Excelè§£æ â†’ é¡§å®¢è‡ªå‹•ä½œæˆ â†’ å·®ç•°ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ â†’ AIåˆ¤å®šå®Ÿè¡Œ

// 3. çµæœç¢ºèª
{
  "totalCreated": 23,
  "results": [
    {
      "success": true,
      "customer": "ã‚µãƒ³ãƒ—ãƒ«å•†äº‹æ ªå¼ä¼šç¤¾",
      "discrepancyId": "cmfz_new_001",
      "amount": -250000,
      "interventionLevel": "ai_autonomous"
    }
  ]
}
```

### Phase 2: AIè‡ªå¾‹å‡¦ç† (3æ®µéšã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)
```typescript
// AIåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ (å®Ÿè£…æ¸ˆã¿: dataImport.ts 392-435è¡Œ)
const aiAnalysis = {
  confidence: 0.85,  // ç¢ºä¿¡åº¦ãƒ™ãƒ¼ã‚¹åˆ¤å®š
  
  // ä»‹å…¥ãƒ¬ãƒ™ãƒ«è‡ªå‹•è¨­å®š
  interventionLevel: amount > 1000000 ? 'ai_assisted' :
                    !email ? 'human_required' : 'ai_autonomous',
  
  // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedAction: 'ã€AIè‡ªå¾‹å‡¦ç†ã€‘äº‹å‰è¨­å®šç£ä¿ƒã‚·ãƒŠãƒªã‚ªã§ãƒ¡ãƒ¼ãƒ«é€ä¿¡',
  
  // å‡¦ç†ãƒ—ãƒ©ãƒ³ (5æ®µéš)
  processingPlan: [
    'Stage 1: AIåˆ†æãƒ»ãƒ¡ãƒ¼ãƒ«æº–å‚™ (2æ™‚é–“)',
    'Stage 2: ç£ä¿ƒãƒ¡ãƒ¼ãƒ«é€ä¿¡ (å³æ™‚)', 
    'Stage 3: 3-5æ—¥å¾Œå›ç­”å¾…ã¡',
    'Stage 4: æœªå›ç­”æ™‚ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—',
    'Stage 5: åˆæ„å›°é›£æ™‚ã®ã¿äººé–“ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³'
  ]
};
```

### Phase 3: ãƒ¡ãƒ¼ãƒ«è‡ªå‹•ç”Ÿæˆãƒ»é€ä¿¡
```typescript
// ãƒ¡ãƒ¼ãƒ«ç”ŸæˆAPI (å®Ÿè£…æ¸ˆã¿: email.ts)
POST /api/email/generate/{discrepancyId}
å‡¦ç†: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ â†’ å¤‰æ•°ç½®æ› â†’ AIç”Ÿæˆ â†’ EmailLogä¿å­˜

// SMTPé€ä¿¡å®Ÿè¡Œ
POST /api/email/send/{emailLogId}
å‡¦ç†: SMTPè¨­å®šèª­ã¿è¾¼ã¿ â†’ nodemailerå®Ÿè¡Œ â†’ é€ä¿¡çµæœè¨˜éŒ²

// é€ä¿¡è¨­å®š (å®Œå…¨å®Ÿè£…)
{
  "smtp": {
    "host": "smtp.gmail.com",
    "port": 587,           // è‡ªå‹•TLSåˆ¤å®š
    "secure": false,       // STARTTLSä½¿ç”¨
    "auth": {
      "user": "system@company.com",
      "pass": "app_password"
    }
  },
  "sender": {
    "name": "AR System",
    "defaultCc": "manager@company.com",
    "defaultBcc": "audit@company.com",
    "signature": "â”â”â”â”â”â”â”â”â”â”â”â”â”\nAR System\nâ”â”â”â”â”â”â”â”â”â”â”â”â”"
  }
}
```

### Phase 4: é€²æ—ç®¡ç†ãƒ»ç›£è¦– (å¿ƒç†çš„è² æ‹…è»½æ¸›)
```typescript
// ãƒ¡ã‚¤ãƒ³ç”»é¢è¡¨ç¤º (ProgressDiscrepancyFlowBoard.tsx)
GET /api/discrepancies?page=1&limit=20&sortBy=detectedAt&sortOrder=desc

// 5ã‚¹ãƒ†ãƒƒãƒ—é€²æ—è¡¨ç¤º (å®Ÿè£…æ¸ˆã¿)
const progressSteps = [
  { id: 1, name: 'å…¥é‡‘å·®ç•°æ¤œçŸ¥', icon: 'ğŸ”', status: 'detected' },
  { id: 2, name: 'ç£ä¿ƒãƒ¡ãƒ¼ãƒ«é€ä»˜æ¸ˆã¿', icon: 'ğŸ“§', status: 'ai_executing' },
  { id: 3, name: 'å…ˆæ–¹é€£çµ¡ã‚’å–ã‚ŒãŸ', icon: 'ğŸ“', status: 'customer_response' },
  { id: 4, name: 'è§£æ±ºæ–¹æ³•åˆæ„æ¸ˆã¿', icon: 'ğŸ¤', status: 'escalated' },
  { id: 5, name: 'è§£æ±ºæ¸ˆã¿', icon: 'âœ…', status: 'resolved' }
];

// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆAPI
GET /api/discrepancies/stats/overview
Response: {
  total: 125,           // ğŸ“Š ç·ä»¶æ•°
  aiAutonomous: 88,     // ğŸ¤– AIè‡ªå¾‹å‡¦ç†  
  humanRequired: 37,    // ğŸ‘¤ äººé–“å¯¾å¿œå¿…è¦
  phoneRequired: 8,     // ğŸ“ é›»è©±ç£ä¿ƒå¿…è¦
  critical: 12,         // ğŸš¨ ç·Šæ€¥å¯¾å¿œ
  totalAmount: -4500000 // ğŸ’° ç·å·®ç•°é¡
}
```

### Phase 5: ç·¨é›†ãƒ»å‰Šé™¤ãƒ»å®Œäº†å‡¦ç†
```typescript
// ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›† (å®Ÿè£…æ¸ˆã¿)
PATCH /api/discrepancies/{id}
Body: {
  "notes": "é¡§å®¢ã‹ã‚‰é€£çµ¡ã‚ã‚Šï¼šæ¥é€±å…¥é‡‘äºˆå®š",
  "priority": "medium", 
  "status": "customer_response",
  "interventionLevel": "ai_autonomous"
}

// è§£æ±ºè¨˜éŒ²
PATCH /api/discrepancies/{id}
Body: {
  "status": "resolved",
  "notes": "å…¥é‡‘ç¢ºèªå®Œäº†ã€‚2025-01-30ã«å…¨é¡å…¥é‡‘ã€‚",
  "resolvedAt": "2025-01-30T10:00:00Z"
}

// è‡ªå‹•å‡¦ç†: DiscrepancyActionä½œæˆ â†’ Taskæ›´æ–° â†’ çµ±è¨ˆåæ˜  â†’ å­¦ç¿’ãƒ‡ãƒ¼ã‚¿è“„ç©
```

## ğŸ›ï¸ ç®¡ç†æ©Ÿèƒ½ Ver3.0

### ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
```typescript
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢ (EmailTemplateManagement.tsx)
URL: http://localhost:3000/email-templates

// CRUDæ“ä½œå®Œå…¨å¯¾å¿œ
POST   /api/email/templates      // ä½œæˆ
GET    /api/email/templates      // ä¸€è¦§å–å¾—
GET    /api/email/templates/:id  // è©³ç´°å–å¾—
PUT    /api/email/templates/:id  // æ›´æ–°
DELETE /api/email/templates/:id  // å‰Šé™¤

// é«˜åº¦æ©Ÿèƒ½
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ãƒ»å¤‰æ•°è‡ªå‹•æŠ½å‡º
- ã‚¿ã‚¤ãƒ—åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° (æœªå…¥é‡‘ç£ä¿ƒãƒ»éå…¥é‡‘ç…§ä¼šãƒ»å…¥é‡‘ç¢ºèªãƒ»ã‚«ã‚¹ã‚¿ãƒ )
- ã‚¹ãƒ†ãƒ¼ã‚¸ç®¡ç† (1æ¬¡ãƒ»2æ¬¡ãƒ»æœ€çµ‚ç£ä¿ƒãƒ»ç…§ä¼š)
- æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³é¸æŠ
```

### SMTPè¨­å®šç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
```typescript
// ãƒ¡ãƒ¼ãƒ«è¨­å®šç”»é¢ (EmailSettingsForm.tsx)
URL: http://localhost:3000/settings/email

// å®Œå…¨æ©Ÿèƒ½
- SMTPè¨­å®š (Gmail/Outlook/Yahooå¯¾å¿œ) 
- ãƒãƒ¼ãƒˆè‡ªå‹•è¨­å®š (587: STARTTLSã€465: SSL)
- CCãƒ»BCCãƒ»ç½²åç·¨é›† (12è¡Œå¯¾å¿œ)
- æ¥ç¶šãƒ†ã‚¹ãƒˆãƒ»å®Ÿãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ†ã‚¹ãƒˆ
- è¨­å®šæ°¸ç¶šåŒ– (SystemConfigä½¿ç”¨)
- æ¥­å‹™æ™‚é–“åˆ¶é™ãƒ»é€ä¿¡ãƒ¬ãƒ¼ãƒˆåˆ¶é™
```

## ğŸš€ Ver3.0 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ç’°å¢ƒè¦ä»¶
```bash
# å¿…é ˆç’°å¢ƒ
- Node.js 18+
- Git
- Docker (ã‚ªãƒ—ã‚·ãƒ§ãƒ³: PostgreSQLä½¿ç”¨æ™‚)

# æ¨å¥¨ç’°å¢ƒ  
- VS Code + TypeScriptæ‹¡å¼µ
- Prismaæ‹¡å¼µ
- Tailwind CSS IntelliSense
```

### 2. ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ (3åˆ†)
```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³
git clone <your-repo-url>
cd accounts-receivable/accounts-receivable

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd backend && npm install && cd ../frontend && npm install && cd ..

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
cd backend
npx prisma generate
npx prisma migrate dev --name init
npx tsx src/scripts/seed.ts

# 4. ã‚µãƒ¼ãƒãƒ¼èµ·å‹• (2ã¤ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)
# Terminal 1: Backend
npx tsx src/index.ts

# Terminal 2: Frontend
cd ../frontend && npm run dev

# 5. ã‚¢ã‚¯ã‚»ã‚¹
# http://localhost:3000
# ãƒ­ã‚°ã‚¤ãƒ³: admin@ar-system.com / password123
```

### 3. å‹•ä½œç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
```bash
# APIç¢ºèª
curl http://localhost:3001/api/health

# ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "admin@ar-system.com", "password": "password123"}'

# å·®ç•°ãƒ‡ãƒ¼ã‚¿ç¢ºèª
curl -H "Authorization: Bearer {token}" \
  http://localhost:3001/api/discrepancies

# Excelå–ã‚Šè¾¼ã¿ãƒ†ã‚¹ãƒˆ
curl -X POST "http://localhost:3001/api/import/discrepancies" \
  -H "Authorization: Bearer {token}" \
  -F "file=@assets/æœªå…¥é‡‘åŠã³éå…¥é‡‘ç®¡ç†ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿.xlsx"
```

## ğŸ“Š Ver3.0 KPIãƒ»æˆåŠŸæŒ‡æ¨™

### æ¥­å‹™åŠ¹ç‡æŒ‡æ¨™
- **AIè‡ªå¾‹å‡¦ç†ç‡**: 75%ä»¥ä¸Šé”æˆ (Ver2.1: 70%ã‹ã‚‰å‘ä¸Š)
- **å¹³å‡è§£æ±ºæ™‚é–“**: 2.5æ—¥ä»¥å†… (Ver2.1: 3æ—¥ã‹ã‚‰çŸ­ç¸®)
- **äººé–“ä»‹å…¥ç‡**: 25%ä»¥ä¸‹ç¶­æŒ (Ver2.1: 30%ã‹ã‚‰æ”¹å–„)
- **ãƒ¡ãƒ¼ãƒ«é€ä¿¡æˆåŠŸç‡**: 95%ä»¥ä¸Š (Ver3.0æ–°æŒ‡æ¨™)

### å¿ƒç†çš„è² æ‹…è»½æ¸›æŒ‡æ¨™
- **é€²æ—å¯è¦–åŒ–**: 5ã‚¹ãƒ†ãƒƒãƒ—ãƒãƒ¼å¸¸æ™‚è¡¨ç¤ºãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- **å¾…æ©Ÿä¸å®‰è§£æ¶ˆ**: AIå‡¦ç†çŠ¶æ³ãƒ»ç¢ºä¿¡åº¦è¡¨ç¤º
- **ä½œæ¥­ä¸­æ–­æœ€å°åŒ–**: è‡ªå‹•ç¶™ç¶šå‡¦ç†ãƒ»ã‚¨ãƒ©ãƒ¼è‡ªå‹•å¾©æ—§
- **èªçŸ¥è² è·è»½æ¸›**: 3è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ãƒ»ç›´æ„Ÿçš„æ“ä½œ

### ã‚·ã‚¹ãƒ†ãƒ å“è³ªæŒ‡æ¨™
- **ç¨¼åƒç‡**: 99.5%ä»¥ä¸Š
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“**: API 500msä»¥å†…ã€UI 100msä»¥å†…
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: 100% (Prismaãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³)
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: JWTèªè¨¼ãƒ»HTTPSãƒ»å…¥åŠ›æ¤œè¨¼å®Œå‚™

## ğŸ¯ é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### é–‹ç™ºã‚³ãƒãƒ³ãƒ‰
```bash
# é–‹ç™ºç’°å¢ƒèµ·å‹•
npm run dev

# ãƒ“ãƒ«ãƒ‰ãƒ»å‹ãƒã‚§ãƒƒã‚¯
cd backend && npx tsc --noEmit
cd frontend && npm run type-check

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†
npx prisma studio           # GUIç®¡ç†
npx prisma migrate reset     # ãƒªã‚»ãƒƒãƒˆ
npx prisma db push          # ã‚¹ã‚­ãƒ¼ãƒåŒæœŸ
```

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# 1. ç’°å¢ƒå¤‰æ•°è¨­å®š
cp backend/.env.example backend/.env.production
# DATABASE_URL, SMTPè¨­å®š, JWT_SECRETç­‰ã‚’è¨­å®š

# 2. ãƒ“ãƒ«ãƒ‰
npm run build

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npx prisma migrate deploy

# 4. Dockeræœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
docker-compose -f docker-compose.prod.yml up -d
```

## ğŸ“‹ Ver3.0 å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… å®Œå…¨å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½
- [x] **Excelå·®ç•°ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿** (dataImport.ts 560è¡Œ)
- [x] **AIè‡ªå¾‹å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³** (3æ®µéšã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)
- [x] **ãƒ¡ãƒ¼ãƒ«è‡ªå‹•ç”Ÿæˆãƒ»é€ä¿¡** (email.ts 749è¡Œ)
- [x] **5ã‚¹ãƒ†ãƒƒãƒ—é€²æ—ç®¡ç†UI** (å¿ƒç†çš„è² æ‹…è»½æ¸›)
- [x] **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆã‚µãƒãƒªãƒ¼** (6æŒ‡æ¨™ç›£è¦–)
- [x] **ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†** (CRUDå®Œå‚™)
- [x] **SMTPè¨­å®šãƒ»æ¥ç¶šãƒ†ã‚¹ãƒˆ** (Gmail/Outlookå¯¾å¿œ)
- [x] **å·®ç•°ãƒ¬ã‚³ãƒ¼ãƒ‰ç·¨é›†ãƒ»å‰Šé™¤** (ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ“ä½œ)
- [x] **3è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ** (åˆ—è¡¨ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«)
- [x] **èªè¨¼ãƒ»JWTç®¡ç†** (auth.ts 201è¡Œ)
- [x] **é¡§å®¢ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ** (customers.ts 278è¡Œ)
- [x] **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡** (realtime.ts 315è¡Œ)
- [x] **ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ** (tasks.ts 225è¡Œ)

### ğŸ”„ ç¶™ç¶šæ”¹å–„é ˜åŸŸ
- [ ] **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ** (è¤‡æ•°ä¼æ¥­åˆ©ç”¨)
- [ ] **é«˜åº¦AIå­¦ç¿’æ©Ÿèƒ½** (å‡¦ç†å±¥æ­´ã‹ã‚‰ã®è‡ªå‹•æ”¹å–„)
- [ ] **å¤–éƒ¨APIçµ±åˆ** (éŠ€è¡ŒAPIãƒ»ä¼šè¨ˆã‚·ã‚¹ãƒ†ãƒ )
- [ ] **ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå¯¾å¿œ** (React Native)
- [ ] **é«˜åº¦ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½** (Power BIçµ±åˆ)

## ğŸ“š è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ Ver3.0

å®Œå…¨ãªæŠ€è¡“ä»•æ§˜ãƒ»å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã¯ä»¥ä¸‹ã‚’å‚ç…§ï¼š

### Ver3.0å°‚ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¾¤
- **ğŸ“‹ APIè¨­è¨ˆæ›¸_å®Œå…¨ç‰ˆ_Ver3.0.md** - 37ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Œå…¨ä»•æ§˜
- **ğŸ—ƒï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸_å®Œå…¨ç‰ˆ_Ver3.0.md** - Prismaã‚¹ã‚­ãƒ¼ãƒãƒ»ERå›³
- **ğŸ–¥ï¸ UIè¨­è¨ˆæ›¸_å®Œå…¨ç‰ˆ_Ver3.0.md** - Reactè¨­è¨ˆãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜
- **âš™ï¸ ç’°å¢ƒæ§‹ç¯‰å®Œå…¨è‡ªå‹•åŒ–æ›¸_Ver3.0.md** - Dockerãƒ»CI/CDæ‰‹é †
- **ğŸ§ª ãƒ†ã‚¹ãƒˆå®Œå…¨å®Ÿè£…æ›¸_Ver3.0.md** - Jestãƒ»E2Eãƒ†ã‚¹ãƒˆä»•æ§˜

### éå»ãƒãƒ¼ã‚¸ãƒ§ãƒ³å‚ç…§
- **Ver2.1å®Ÿè£…å¯¾å¿œç‰ˆ** - accounts-receivable-document/versions/v2.1/
- **Ver1.1å®Œå…¨ç‰ˆ** - accounts-receivable-document/versions/v1.1/

---

**ğŸ“… ä½œæˆæ—¥**: 2025å¹´1æœˆ26æ—¥  
**âœï¸ ä½œæˆè€…**: Claude Code Assistant  
**ğŸ”„ ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.0 å®Œå…¨å®Ÿè£…ç‰ˆ  
**ğŸ“‹ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœ¬æ ¼é‹ç”¨å¯èƒ½ - 63ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»20,557è¡Œå®Œå…¨å®Ÿè£…æ¸ˆã¿

*ğŸ¯ Ver3.0ã¯å®Ÿæˆ¦æŠ•å…¥å¯èƒ½ãªå®Œå…¨å®Ÿè£…ã‚·ã‚¹ãƒ†ãƒ ã§ã™*  
*ğŸ’¡ ã“ã®ä»•æ§˜æ›¸ã§åŒç­‰ã‚·ã‚¹ãƒ†ãƒ ã®100%å†ç¾ãŒå¯èƒ½ã§ã™*  
*ğŸš€ å®Ÿè£…æ¸ˆã¿ã‚³ãƒ¼ãƒ‰: Backend 3,078è¡Œ + Frontend 17,000è¡Œè¶… + AIè‡ªå¾‹å‡¦ç†å®Œå…¨å¯¾å¿œ*